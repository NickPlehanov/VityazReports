<mah:MetroWindow  xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls" x:Class="VityazReports.Views.AnalyzeServicemans"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
                  xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
      xmlns:local="clr-namespace:VityazReports.Views" xmlns:vm="clr-namespace:VityazReports.ViewModel"
                  mc:Ignorable="d" 
      d:DesignHeight="450" d:DesignWidth="800"
      Title="Анализ работы техников">
    <mah:MetroWindow.DataContext>
        <vm:AnalyzeServicemansViewModel/>
    </mah:MetroWindow.DataContext>
    <mah:MetroWindow.LeftWindowCommands>
        <mah:WindowCommands>
            <Button Foreground="White" BorderThickness="0" Width="35" Command="{Binding ShowServicemansListCommand}" ToolTip="Показать список техников">
                <iconPacks:BootstrapIcons Kind="Filter"/>
            </Button>
            <!--<Button Foreground="White" BorderThickness="0" Width="35" Command="{Binding HelpCommand}" ToolTip="Справка">
                <iconPacks:BootstrapIcons Kind="Question"/>
            </Button>
            <mah:ToggleSwitch Content="ОС/ПС" IsOn="{Binding SwitchOSPS}" />-->
        </mah:WindowCommands>
    </mah:MetroWindow.LeftWindowCommands>
    <Grid>
        <mah:Flyout Position="Right" IsModal="True" Panel.ZIndex="2" AnimateOpacity="True" IsOpen="{Binding ServicemansListVisible}">
            <StackPanel>
                <DatePicker SelectedDateFormat="Short" SelectedDate="{Binding DateOrder, StringFormat=\{0:dd.MM.yyyy\}}" Margin="5"/>
                <!--<Button Content="Запрос" Command="{Binding GetServiceordersOnDate}"/>-->
                <ScrollViewer>
                    <StackPanel>
                        <ListBox ItemsSource="{Binding ServicemansList}">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <ToggleButton Margin="5" Content="{Binding Name}" Tag="{Binding ServicemanID}"
                                              Command="{Binding DataContext.SelectServicemanCommand, RelativeSource={RelativeSource AncestorType=ListBox}}" CommandParameter="{Binding ServicemanID}"/>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </StackPanel>
                </ScrollViewer>
            </StackPanel>
        </mah:Flyout>
        <UserControl Content="{Binding gmaps_contol}"/>
    </Grid>
</mah:MetroWindow>
